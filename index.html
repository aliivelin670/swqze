<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neva Code</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{background:#0b0b0f;color:#fff}

/* ===== TOP BAR ===== */
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px 25px;
}
.logo{
  display:flex;
  align-items:center;
  gap:10px;
  font-size:22px;
}
.logo span:nth-child(2){color:#fff;font-weight:bold}
.logo span:nth-child(3){color:#a855f7;font-weight:bold}
.menu-btn{
  font-size:26px;
  cursor:pointer;
}

/* ===== MENU ===== */
.menu{
  position:fixed;
  top:0;right:-320px;
  width:300px;height:100%;
  background:#111;
  padding:20px;
  transition:.3s;
  z-index:10;
}
.menu.active{right:0}
.menu h3{margin-bottom:20px;color:#a855f7}
.menu div{
  background:#1a1a1f;
  padding:15px;
  border-radius:15px;
  margin-bottom:10px;
  cursor:pointer;
}
.menu .logout{
  margin-top:30px;
  background:#2a1414;
  color:#f87171;
}

/* ===== CENTER ===== */
.center{
  text-align:center;
  margin-top:120px;
  padding:20px;
}
.title{
  font-size:60px;
  font-weight:bold;
}
.title span{color:#a855f7}
.subtitle{
  margin-top:20px;
  opacity:.8;
}
.btn{
  margin-top:30px;
  display:inline-block;
  padding:15px 30px;
  border-radius:30px;
  background:#5865F2;
  color:white;
  font-weight:bold;
  cursor:pointer;
  text-decoration:none;
}

/* ===== USER ===== */
.user-box{
  margin-top:20px;
}
.avatar{
  width:70px;
  height:70px;
  border-radius:50%;
  margin-top:10px;
}

/* ===== CODE PAGE ===== */
.codes{
  display:none;
  padding:40px;
}
.search{
  margin:20px auto;
  max-width:500px;
}
.search input{
  width:100%;
  padding:15px;
  border-radius:25px;
  border:none;
}
.categories{
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
  margin:20px 0;
}
.cat{
  background:#1a1a1f;
  padding:10px 20px;
  border-radius:20px;
  cursor:pointer;
}
.empty{
  text-align:center;
  opacity:.6;
  margin-top:80px;
}
.add-code{
  margin-top:30px;
  background:#a855f7;
  padding:12px 25px;
  border-radius:25px;
  display:inline-block;
  cursor:pointer;
}

/* ===== HIDDEN ===== */
.hidden{display:none}
</style>
</head>

<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="logo">
    <span>&lt;/&gt;</span>
    <span>Neva</span>
    <span>Code</span>
  </div>
  <div class="menu-btn" onclick="toggleMenu()">☰</div>
</div>

<!-- MENU -->
<div class="menu" id="menu">
  <h3>Menü</h3>
  <div onclick="showHome()">Ana Sayfa</div>
  <div onclick="showCodes()">Kodlar</div>
  <div>Yetkili Kadrosu</div>
  <div>Lisanslar</div>
  <div class="logout" onclick="logout()">Çıkış Yap</div>
</div>

<!-- HOME -->
<div class="center" id="home">
  <div class="title">Neva <span>Code</span></div>
  <div class="subtitle">
    Discord Bot geliştiricileri için güvenli, hızlı ve düzenli kod paylaşım platformu.
  </div>

  <!-- LOGIN -->
  <a id="loginBtn" class="btn" href="https://4d31726d-e4bb-4ed8-8637-5ca252930334-00-3bcm8knc2e6hj.worf.replit.dev/api/auth/discord">
    Discord ile Giriş Yap
  </a>

  <!-- USER -->
  <div class="user-box hidden" id="userBox">
    <div id="welcome"></div>
    <img id="avatar" class="avatar">
    <div class="btn" onclick="showCodes()">Kodlara Eriş</div>
  </div>
</div>

<!-- CODES -->
<div class="codes" id="codes">
  <h1>Kodlar</h1>
  <p style="opacity:.7">Kategorilere göre filtreleyin, arayın ve sıralayın</p>

  <div class="search">
    <input type="text" placeholder="Kod Ara...">
  </div>

  <div class="categories">
    <div class="cat">BDFD</div>
    <div class="cat">Aoi.js</div>
    <div class="cat">JavaScript</div>
    <div class="cat">Python</div>
    <div class="cat">Altyapı</div>
  </div>

  <div class="empty">
    Bu kategoride henüz kod paylaşılmadı.
  </div>

  <div style="text-align:center">
    <div class="add-code">+ Kod Ekle (Yetkili)</div>
  </div>
</div>

<script>
const API = "https://neva-auth.repl.co";

function toggleMenu(){
  document.getElementById("menu").classList.toggle("active")
}
function showCodes(){
  home.style.display="none"
  codes.style.display="block"
  menu.classList.remove("active")
}
function showHome(){
  codes.style.display="none"
  home.style.display="block"
  menu.classList.remove("active")
}

/* === AUTH CHECK === */
fetch(API + "/api/me", { credentials:"include" })
.then(res => res.json())
.then(user => {
  if(!user) return;

  loginBtn.style.display="none";
  userBox.classList.remove("hidden");
  welcome.innerText = "Hoşgeldin, " + user.username;
  avatar.src = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`;
});

/* === LOGOUT === */
function logout(){
  fetch(API + "/api/logout",{ credentials:"include" })
  .then(()=>location.reload())
}
</script>

</body>
</html>